<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PT Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #3498db;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
        }

        .btn-generate {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .member-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .member-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .member-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .member-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
        }

        .member-item.absent {
            background: #ffebee;
            border-color: #e57373;
        }

        .alibi-input {
            margin-top: 10px;
            width: 100%;
        }

        .workout-display {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            margin-top: 20px;
        }

        .output-section {
            background: #2c3e50;
            color: white;
            padding: 30px;
            margin-top: 30px;
            border-radius: 15px;
        }

        .output-text {
            background: #34495e;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            margin: 20px 0;
            border: 2px solid #4a5f7a;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }

        .workout-history {
            max-height: 300px;
            overflow-y: auto;
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }

        .workout-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .workout-item:last-child {
            border-bottom: none;
        }

        .alert {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid;
        }

        .alert-info {
            background: #e3f2fd;
            border-color: #2196f3;
            color: #1976d2;
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
            }
            
            .section {
                padding: 20px;
            }
            
            .member-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèãÔ∏è PT Management System</h1>
            <p>Streamline your unit's physical training coordination</p>
        </div>

        <div class="main-content">
            <div class="alert alert-info">
                <strong>üí° Quick Start:</strong> Add your unit members, select a PT leader, generate or select a workout, mark attendance, and generate your report to copy into Teams!
            </div>

            <!-- Unit Setup Section -->
            <div class="section">
                <h2>üë• Unit Setup</h2>
                <div class="form-group">
                    <label for="unitName">Unit Name:</label>
                    <input type="text" id="unitName" placeholder="Enter your unit name" value="73 ISRS Det 6" readonly>
                </div>
                <div class="form-group">
                    <label for="memberFile">Upload Member List (CSV/TXT):</label>
                    <input type="file" id="memberFile" accept=".csv,.txt" onchange="uploadMemberList()">
                    <small style="color: #666; display: block; margin-top: 5px;">Upload a file with one name per line</small>
                </div>
                <div class="form-group">
                    <label for="newMember">Add Unit Member:</label>
                    <input type="text" id="newMember" placeholder="Enter member name">
                    <label>
                        <input type="checkbox" id="isPTLeader" style="width: auto; margin-right: 5px;">
                        PT Leader
                    </label>
                    <button class="btn" onclick="addMember()">Add Member</button>
                </div>
                <div class="form-group">
                    <h3>Current Members:</h3>
                    <div id="memberManagement" class="member-management">
                        <!-- Member management will be populated here -->
                    </div>
                </div>
            </div>

            <!-- PT Assignment Section -->
            <div class="section">
                <h2>üéØ PT Assignment</h2>
                <div class="form-group">
                    <label for="ptDate">PT Date:</label>
                    <input type="date" id="ptDate">
                </div>
                <div class="form-group">
                    <label for="ptLeader">PT Leader:</label>
                    <select id="ptLeader">
                        <option value="">Select PT Leader</option>
                    </select>
                    <button class="btn" onclick="assignRandomLeader()">Random Assignment</button>
                </div>
                <div class="form-group">
                    <label for="ptLocation">Location:</label>
                    <select id="ptLocation">
    		    <option value="Gaffney Gym">Gaffney Gym</option>
    		    <option value="Eagle Fitness">Eagle Fitness</option>
   		    <option value="Parade Field">Parade Field</option>
    		    <option value="custom">Other (Custom)</option>
		</select>
		<input type="text" id="customLocation" placeholder="Enter custom location" style="display:none; margin-top: 10px;">
                </div>
                <div class="form-group">
                    <label for="ptTime">Time:</label>
                    <input type="time" id="ptTime" value="06:30">
                </div>
            </div>

            <!-- Workout Section -->
            <div class="section">
                <h2>üí™ Workout Management</h2>
                <div class="form-group">
                    <label for="workoutType">Workout Type:</label>
                    <select id="workoutType">
                        <option value="cardio">Cardio</option>
                        <option value="strength">Strength Training</option>
                        <option value="mixed">Mixed/Circuit</option>
                        <option value="running">Running</option>
                        <option value="calisthenics">Calisthenics</option>
                        <option value="team">Team Building</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="workoutIntensity">Intensity Level:</label>
                    <select id="workoutIntensity">
                        <option value="light">Light</option>
                        <option value="moderate">Moderate</option>
                        <option value="intense">Intense</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="workoutDuration">Duration (minutes):</label>
                    <input type="number" id="workoutDuration" min="15" max="120" value="60">
                </div>
                <button class="btn btn-generate" onclick="generateWorkout()">ü§ñ Generate AI Workout</button>
                <button class="btn" onclick="selectFromHistory()">üìã Select from History</button>
                <button class="btn btn-secondary" onclick="addCustomWorkout()">‚ûï Add Custom Workout</button>
                
                <div class="workout-display" id="workoutDisplay" style="display: none;">
                    <h3>Selected Workout:</h3>
                    <div id="workoutContent"></div>
                </div>

                <div class="workout-history" id="workoutHistory">
                    <h3>Recent Workouts:</h3>
                    <div id="historyList"></div>
                </div>
            </div>

            <!-- Attendance Section -->
            <div class="section">
                <h2>üìä Attendance Tracking</h2>
                <div class="member-list" id="memberList">
                    <!-- Members will be populated here -->
                </div>
                <button class="btn" onclick="markAllPresent()">‚úÖ Mark All Present</button>
                <button class="btn btn-secondary" onclick="markAllAbsent()">‚ùå Mark All Absent</button>
            </div>

            <!-- Report Generation -->
            <div class="section">
                <h2>üìã Generate Report</h2>
                <button class="btn btn-generate" onclick="generateReport()">üöÄ Generate PT Report</button>
                <div class="output-section" id="outputSection" style="display: none;">
                    <h3>üìÑ Copy This Report to Teams:</h3>
                    <div class="output-text" id="reportOutput"></div>
                    <button class="btn" onclick="copyToClipboard()">üìã Copy to Clipboard</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        
	document.getElementById('ptLocation').addEventListener('change', function() {
    	const customInput = document.getElementById('customLocation');
   	customInput.style.display = this.value === 'custom' ? 'block' : 'none';
	});


	// Data Storage
        let members = []; // [{ name: 'John Doe', isPTLeader: true }]
        let workoutHistory = [];
        let attendanceHistory = [];
        let ptSessions = 0;

        // Initialize the app
        function init() {
            loadData();
            setTodayDate();
            updateStats();
            updateMemberList();
            updateWorkoutHistory();
            updatePTLeaderOptions();
        }

        // Set today's date
        function setTodayDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('ptDate').value = today;
        }

        // Load data from localStorage
        function loadData() {
            const savedMembers = localStorage.getItem('ptMembers');
            const savedWorkouts = localStorage.getItem('ptWorkouts');
            const savedAttendance = localStorage.getItem('ptAttendance');
            const savedSessions = localStorage.getItem('ptSessions');

            if (savedMembers) members = JSON.parse(savedMembers);
            if (savedWorkouts) workoutHistory = JSON.parse(savedWorkouts);
            if (savedAttendance) attendanceHistory = JSON.parse(savedAttendance);
            if (savedSessions) ptSessions = parseInt(savedSessions);
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('ptMembers', JSON.stringify(members));
            localStorage.setItem('ptWorkouts', JSON.stringify(workoutHistory));
            localStorage.setItem('ptAttendance', JSON.stringify(attendanceHistory));
            localStorage.setItem('ptSessions', ptSessions.toString());
        }

        // Add member
        function addMember() {
            const input = document.getElementById('newMember');
            const name = input.value.trim();
	    const isLeader = document.getElementById('isPTLeader').checked;

	if (name && !members.some(m => m.name === name)) {
    		members.push({ name, isPTLeader: isLeader });
                input.value = '';
                updateMemberList();
                updatePTLeaderOptions();
                updateStats();
                saveData();
            }
        }
	
	function uploadMemberList() {
   	    const fileInput = document.getElementById('memberFile');
   	    const file = fileInput.files[0];

   	    if (!file) return;

    	    const reader = new FileReader();
    	    reader.onload = function(e) {
                const lines = e.target.result.split('\n').map(line => line.trim()).filter(Boolean);
                lines.forEach(line => {
            	    const [name, tag] = line.split(',').map(p => p.trim());
            	    if (name && !members.some(m => m.name === name)) {
                	members.push({ name, isPTLeader: tag?.toLowerCase() === 'pt' });
            	    }
        	});
        	updateMemberList();
        	updatePTLeaderOptions();
        	updateStats();
        	saveData();
    	    };
    	    reader.readAsText(file);
	}

        // Update member list for attendance
        function updateMemberList() {
            const memberList = document.getElementById('memberList');
            memberList.innerHTML = '';
            
            members.forEach(member => {
                const memberDiv = document.createElement('div');
                memberDiv.className = 'member-item';
                memberDiv.innerHTML = `
                    <input type="checkbox" id="member-${member}" onchange="toggleMemberStatus('${member}')">
                    <label for="member-${name}">${name}${isPTLeader ? ' ‚≠ê' : ''}</label>
                    <div class="alibi-input" id="alibi-${member}" style="display: none;">
                        <input type="text" placeholder="Reason for absence..." id="reason-${member}">
                    </div>
                `;
                memberList.appendChild(memberDiv);
            });
        }

        // Toggle member attendance status
        function toggleMemberStatus(member) {
            const checkbox = document.getElementById(`member-${member}`);
            const memberDiv = checkbox.closest('.member-item');
            const alibiDiv = document.getElementById(`alibi-${member}`);
            
            if (checkbox.checked) {
                memberDiv.classList.remove('absent');
                alibiDiv.style.display = 'none';
            } else {
                memberDiv.classList.add('absent');
                alibiDiv.style.display = 'block';
            }
        }

        // Update PT leader options
        function updatePTLeaderOptions() {
            const select = document.getElementById('ptLeader');
            select.innerHTML = '<option value="">Select PT Leader</option>';
            
            members.filter(m => m.isPTLeader).forEach(({ name }) => {
                const option = document.createElement('option');
                option.value = name;
                option.textContent = member;
                select.appendChild(option);
            });
        }

        // Assign random PT leader
        function assignRandomLeader() {
            if (members.length === 0) return;
            
            const leaders = members.filter(m => m.isPTLeader);
	    if (leaders.length === 0) return;
	    const randomIndex = Math.floor(Math.random() * leaders.length);
	    const randomMember = leaders[randomIndex].name;
        }

        // Generate AI workout
        function generateWorkout() {
            const type = document.getElementById('workoutType').value;
            const intensity = document.getElementById('workoutIntensity').value;
            const duration = document.getElementById('workoutDuration').value;
            
            // Simulated AI workout generation
            const workouts = {
                cardio: {
                    light: [`15 min warm-up walk\n20 min light jogging\n10 min cool-down stretching\n5 min breathing exercises`],
                    moderate: [`10 min warm-up\n30 min interval running (2 min run, 1 min walk)\n15 min circuit: jumping jacks, mountain climbers, burpees\n5 min cool-down`],
                    intense: [`5 min dynamic warm-up\n20 min HIIT sprints\n20 min cardio circuit\n10 min core work\n5 min stretching`]
                },
                strength: {
                    light: [`10 min warm-up\n3 sets of 10 push-ups\n3 sets of 15 squats\n3 sets of 30-sec planks\n2 sets of 10 lunges\n10 min stretching`],
                    moderate: [`10 min warm-up\n4 sets of 15 push-ups\n4 sets of 20 squats\n3 sets of 45-sec planks\n3 sets of 12 lunges each leg\n15 min stretching`],
                    intense: [`5 min dynamic warm-up\n5 sets of 20 push-ups\n5 sets of 25 squats\n4 sets of 60-sec planks\n4 sets of 15 lunges each leg\n3 sets of 10 burpees\n10 min stretching`]
                },
                mixed: {
                    light: [`10 min warm-up\n15 min light calisthenics\n20 min walking\n10 min yoga stretches\n5 min meditation`],
                    moderate: [`10 min warm-up\n20 min circuit training\n20 min jogging\n10 min strength exercises`],
                    intense: [`5 min warm-up\n25 min high-intensity circuit\n20 min running\n10 min strength finisher`]
                }
            };
            
            const selectedWorkout = workouts[type][intensity][0];
            displayWorkout(`AI Generated ${type.charAt(0).toUpperCase() + type.slice(1)} Workout (${intensity})`, selectedWorkout);
        }

        // Display workout
        function displayWorkout(title, content) {
            const display = document.getElementById('workoutDisplay');
            const contentDiv = document.getElementById('workoutContent');
            
            contentDiv.innerHTML = `<h4>${title}</h4><p style="white-space: pre-line; margin-top: 10px;">${content}</p>`;
            display.style.display = 'block';
        }

        // Add custom workout
        function addCustomWorkout() {
            const name = prompt('Enter workout name:');
            const content = prompt('Enter workout details:');
            
            if (name && content) {
                const workout = {
                    name: name,
                    content: content,
                    date: new Date().toISOString().split('T')[0],
                    type: 'custom'
                };
                
                workoutHistory.unshift(workout);
                updateWorkoutHistory();
                displayWorkout(name, content);
                saveData();
            }
        }

        // Update workout history
        function updateWorkoutHistory() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            workoutHistory.slice(0, 10).forEach((workout, index) => {
                const workoutDiv = document.createElement('div');
                workoutDiv.className = 'workout-item';
                workoutDiv.innerHTML = `
                    <span>${workout.name} (${workout.date})</span>
                    <button class="btn" onclick="selectWorkout(${index})">Select</button>
                `;
                historyList.appendChild(workoutDiv);
            });
        }

        // Select workout from history
        function selectWorkout(index) {
            const workout = workoutHistory[index];
            displayWorkout(workout.name, workout.content);
        }

        // Mark all present/absent
        function markAllPresent() {
            members.forEach(member => {
                const checkbox = document.getElementById(`member-${member}`);
                const memberDiv = checkbox.closest('.member-item');
                const alibiDiv = document.getElementById(`alibi-${member}`);
                
                checkbox.checked = true;
                memberDiv.classList.remove('absent');
                alibiDiv.style.display = 'none';
            });
        }

        function markAllAbsent() {
            members.forEach(member => {
                const checkbox = document.getElementById(`member-${member}`);
                const memberDiv = checkbox.closest('.member-item');
                const alibiDiv = document.getElementById(`alibi-${member}`);
                
                checkbox.checked = false;
                memberDiv.classList.add('absent');
                alibiDiv.style.display = 'block';
            });
        }

        // Generate report
        function generateReport() {
            const unitName = document.getElementById('unitName').value;
            const ptDate = document.getElementById('ptDate').value;
            const ptLeader = document.getElementById('ptLeader').value;
            let ptLocation = document.getElementById('ptLocation').value;
	    if (ptLocation === 'custom') {
            	ptLocation = document.getElementById('customLocation').value || 'Custom Location';
	    }

            const ptTime = document.getElementById('ptTime').value;
            
            const workoutContent = document.getElementById('workoutContent').textContent;
            
            let present = [];
            let absent = [];
            
            members.forEach(member => {
                const checkbox = document.getElementById(`member-${member}`);
                if (checkbox.checked) {
                    present.push(member);
                } else {
                    const reason = document.getElementById(`reason-${member}`).value;
                    absent.push(reason ? `${member} (${reason})` : member);
                }
            });
            
            const report = `üèãÔ∏è **PT REPORT - ${unitName}**
üìÖ Date: ${ptDate}
üïê Time: ${ptTime}
üìç Location: ${ptLocation}
üë§ PT Leader: ${ptLeader}

üí™ **Workout:**
${workoutContent || 'No workout selected'}

üìä **Attendance:**
‚úÖ Present (${present.length}): ${present.join(', ') || 'None'}
‚ùå Absent (${absent.length}): ${absent.join(', ') || 'None'}

üìà **Attendance Rate:** ${Math.round((present.length / members.length) * 100)}%

Generated by PT Management System`;
            
            document.getElementById('reportOutput').textContent = report;
            document.getElementById('outputSection').style.display = 'block';
            
            // Save attendance data
            attendanceHistory.push({
                date: ptDate,
                present: present.length,
                absent: absent.length,
                total: members.length
            });
            
            ptSessions++;
            updateStats();
            saveData();
        }

        // Copy to clipboard
        function copyToClipboard() {
            const reportText = document.getElementById('reportOutput').textContent;
            navigator.clipboard.writeText(reportText).then(() => {
                alert('Report copied to clipboard!');
            });
        }

        // Update statistics
        function updateStats() {
            document.getElementById('totalMembers').textContent = members.length;
            document.getElementById('totalSessions').textContent = ptSessions;
            
            if (attendanceHistory.length > 0) {
                const totalAttendance = attendanceHistory.reduce((sum, session) => sum + session.present, 0);
                const totalPossible = attendanceHistory.reduce((sum, session) => sum + session.total, 0);
                const avgAttendance = totalPossible > 0 ? Math.round((totalAttendance / totalPossible) * 100) : 0;
                document.getElementById('avgAttendance').textContent = avgAttendance + '%';
            }
        }

        // Initialize app when page loads
        window.onload = init;
    </script>
</body>
</html>
